(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{64:function(e,t,s){},65:function(e,t,s){},74:function(e,t,s){"use strict";s.r(t);var r=s(0),n=s(1),c=s.n(n),i=s(30),a=s.n(i),o=(s(64),s(65),s(21)),l=s(8),d=s(9),h=s(11),u=s(10),j=s(26),b=s(13),p=s(7),O=s.n(p),x=s(81),g=s(85),m=s(84),v=s(38),f=s(39),y=s.p+"static/media/restorelogo.8f0c5e8d.png",k=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)(g.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(r.jsx)(g.a.Brand,{as:j.b,to:"/",children:Object(r.jsx)("img",{src:y,alt:"Logo of RestoreBot",className:"d-inline-block align-top",width:"30px",height:"30px"})}),Object(r.jsx)(g.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(r.jsxs)(g.a.Collapse,{id:"responsive-navbar-nav",children:[Object(r.jsxs)(m.a,{className:"mr-auto",children:[Object(r.jsxs)(m.a.Link,{as:j.b,to:"/",children:[Object(r.jsx)(v.a,{icon:f.a})," Information"]}),this.props.user&&Object(r.jsxs)(m.a.Link,{as:j.b,to:"/servers",children:[Object(r.jsx)(v.a,{icon:f.b})," Server Selection"]}),this.props.user&&this.props.user.admin&&Object(r.jsxs)(m.a.Link,{as:j.b,to:"/admin",children:[Object(r.jsx)(v.a,{icon:f.e})," Admin"]})]}),Object(r.jsxs)(m.a,{children:[this.props.user&&Object(r.jsxs)(m.a.Link,{href:"".concat("https://api.backupcord.de","/oauth/logout"),children:[Object(r.jsx)(v.a,{icon:f.d})," Logout (".concat(this.props.user.username,"#").concat(this.props.user.discriminator,")")]}),!this.props.user&&Object(r.jsxs)(m.a.Link,{href:"".concat("https://api.backupcord.de","/oauth/login"),children:[Object(r.jsx)(v.a,{icon:f.c})," Login with Discord"]})]})]})]})})}}]),s}(n.Component),w=s(16),S=s(76),C=s(86),A=s(83),T=s(77),I=s(78),U=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(l.a)(this,s);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:null,success:null,newKeys:null,loading:!0,user:null,premiumAddUser:null,stressTestGuild:null,data:null,keysToGenerate:"1",keyToRevoke:null,disabled:[],visibleUsers:10},e}return Object(d.a)(s,[{key:"loadMore",value:function(){this.setState({visibleUsers:this.state.visibleUsers+10})}},{key:"loadData",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/admin/load"),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({loading:!0,data:null}):e.setState({loading:!1,data:t.response})})).catch((function(){e.setState({loading:!0,data:null})}))}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"generateKey",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/admin/generate-premium-key"),{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({keysToGenerate:this.state.keysToGenerate})}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,newKeys:null}):e.setState({newKeys:t.response,error:null})})).catch((function(){e.setState({error:"A server error occured when generating a premium key",success:null})}))}},{key:"revokeKey",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/admin/revoke-premium-key"),{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({keyToRevoke:this.state.keyToRevoke})}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):e.setState({success:"Revoked premium key successfully.",error:null})})).catch((function(){e.setState({error:"A server error occured when revoking a premium key",success:null})}))}},{key:"stressTest",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/stress-test/").concat(this.state.stressTestGuild),{headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):e.setState({success:"Stress test started",error:null})})).catch((function(){e.setState({error:"A server error occured when revoking a premium key",success:null})}))}},{key:"revokePremium",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/admin/revoke-premium-user"),{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({user:this.state.user})}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):(e.loadData(),e.setState({success:t.response,error:null}))})).catch((function(){e.setState({error:"A server error occured when revoking a premium user",success:null})}))}},{key:"addPremiumUser",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/admin/add-premium-user"),{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({premiumAddUser:this.state.premiumAddUser})}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):(e.loadData(),e.setState({success:t.response,error:null}))})).catch((function(){e.setState({error:"A server error occured when adding a premium user",success:null})}))}},{key:"purgeKeys",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/admin/purge-premium-keys"),{credentials:"include",method:"POST"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):e.setState({success:"Successfully purged ".concat(t.response," keys"),error:null})})).catch((function(){e.setState({error:"A server error occured when purging premium keys",success:null})}))}},{key:"denyMigration",value:function(e,t){var s=this;O()("".concat("https://api.backupcord.de","/admin/migration-request/deny"),{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldId:e,newId:t})}).then((function(e){return e.json()})).then((function(t){return t.error?s.setState({error:t.response,success:null}):s.setState({success:t.response,error:null,disabled:s.state.disabled.concat([e])})})).catch((function(){s.setState({error:"A server error occured when denying a migration request",success:null})}))}},{key:"approveMigration",value:function(e,t){var s=this;O()("".concat("https://api.backupcord.de","/admin/migration-request/approve"),{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldId:e,newId:t})}).then((function(e){return e.json()})).then((function(t){return t.error?s.setState({error:t.response,success:null}):s.setState({success:t.response,error:null,disabled:s.state.disabled.concat([e])})})).catch((function(){s.setState({error:"A server error occured when approving a migration request",success:null})}))}},{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e=this;return this.props.user.admin?this.state.loading||!this.state.data?Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:"Loading..."})}):Object(r.jsxs)(c.a.Fragment,{children:[this.state.error&&Object(r.jsx)(S.a,{variant:"danger",children:this.state.error}),this.state.success&&Object(r.jsx)(S.a,{variant:"success",children:this.state.success}),this.state.newKeys&&Object(r.jsxs)(S.a,{variant:"info",children:[Object(r.jsxs)("strong",{children:[this.state.keysToGenerate," keys have been generated:"]}),Object(r.jsx)("br",{}),this.state.newKeys.map((function(e){return Object(r.jsx)("p",{children:e})}))]}),Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:"Admin Area"})}),Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Statistics"})})}),Object(r.jsxs)(C.a.Body,{children:[Object(r.jsxs)("h5",{children:[Object(r.jsx)("strong",{children:"Guild Count: "}),Object(r.jsx)("i",{children:this.state.data.guildCount})]}),Object(r.jsxs)("h5",{children:[Object(r.jsx)("strong",{children:"User Count: "}),Object(r.jsx)("i",{children:this.state.data.userCount})]})]})]}),Object(r.jsx)("br",{}),Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Stress Testing"})})}),Object(r.jsxs)(C.a.Body,{children:[Object(r.jsx)("p",{children:"Stress testing is used to test the rate limits from the Discord API and will pull every authorized user into a specific guild."}),Object(r.jsx)(A.a.Control,{id:"stressTestGuild",placeholder:"Provide a Guild ID",onChange:this.handleInput.bind(this),value:this.state.stressTestGuild||"",type:"input"}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{variant:"warning",onClick:this.stressTest.bind(this),block:!0,children:"Stress Test!"})]})]}),Object(r.jsx)("br",{}),Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Premium Key Management"})})}),Object(r.jsxs)(C.a.Body,{children:[Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"Generator"})}),Object(r.jsx)(A.a.Control,{id:"keysToGenerate",placeholder:"Number of keys to generate",onChange:this.handleInput.bind(this),value:this.state.keysToGenerate||"",type:"input"}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{variant:"light",onClick:this.generateKey.bind(this),block:!0,children:"Generate Premium Keys"}),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"Revoking"})}),Object(r.jsx)(A.a.Control,{id:"keyToRevoke",placeholder:"Premium key to revoke",onChange:this.handleInput.bind(this),value:this.state.keyToRevoke||"",type:"input"}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{variant:"danger",onClick:this.revokeKey.bind(this),block:!0,children:"Revoke Premium Key"}),Object(r.jsx)("hr",{}),Object(r.jsx)(T.a,{variant:"danger",onClick:this.purgeKeys.bind(this),block:!0,children:"Purge Unused Keys"})]})]}),Object(r.jsx)("br",{}),Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Premium Management"})})}),Object(r.jsxs)(C.a.Body,{children:[Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"Granting"})}),Object(r.jsx)(A.a.Control,{id:"premiumAddUser",placeholder:"A discord user ID",onChange:this.handleInput.bind(this),value:this.state.premiumAddUser||"",type:"input"}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{onClick:this.addPremiumUser.bind(this),variant:"light",block:!0,children:"Grant Premium To User"}),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"Revoking"})}),Object(r.jsx)(A.a.Control,{id:"user",placeholder:"A discord user ID",onChange:this.handleInput.bind(this),value:this.state.user||"",type:"input"}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{variant:"danger",onClick:this.revokePremium.bind(this),block:!0,children:"Revoke Premium Access"}),Object(r.jsx)("hr",{}),Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"Activated Premium Users"})}),Object(r.jsx)("p",{children:"See a list of the premium activated users."}),Object(r.jsx)("hr",{}),Object(r.jsxs)(I.a,{className:"table-dark",variant:"dark",borderless:!0,hover:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"User ID"}),Object(r.jsx)("th",{children:"User Tag"})]})}),Object(r.jsx)("tbody",{children:this.state.data.premiumUsers.slice(0,this.state.visibleUsers).map((function(e){return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.id}),Object(r.jsx)("td",{children:e.tag})]})})}))})]}),this.state.data.premiumUsers.length>this.state.visibleUsers&&Object(r.jsx)(T.a,{variant:"light",onClick:this.loadMore.bind(this),block:!0,children:"Load More..."})]})]}),Object(r.jsx)("br",{}),Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Migration Requests"})})}),Object(r.jsxs)(C.a.Body,{children:[Object(r.jsx)("p",{children:"See migration requests below and decide accordingly whether to approve or deny."}),Object(r.jsx)("hr",{}),Object(r.jsxs)(I.a,{className:"table-dark",variant:"dark",borderless:!0,hover:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Old User"}),Object(r.jsx)("th",{children:"New User"}),Object(r.jsx)("th",{children:"Actions"})]})}),Object(r.jsx)("tbody",{children:this.state.data.migrations.map((function(t){return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"".concat(t.oldTag," (").concat(t.oldId,")")}),Object(r.jsx)("td",{children:"".concat(t.newTag," (").concat(t.newId,")")}),Object(r.jsxs)("td",{children:[Object(r.jsx)(T.a,{onClick:e.approveMigration.bind(e,t.oldId,t.newId),disabled:e.state.disabled.includes(t.oldId),size:"sm",variant:"success",children:"Approve"})," ",Object(r.jsx)(T.a,{onClick:e.denyMigration.bind(e,t.oldId,t.newId),disabled:e.state.disabled.includes(t.oldId),size:"sm",variant:"danger",children:"Deny"})]})]})})}))})]})]})]}),Object(r.jsx)("br",{})]}):Object(r.jsx)(S.a,{variant:"warning",children:Object(r.jsx)("strong",{children:"You are not an admin."})})}}]),s}(n.Component),P=s(24),D=s(80),R=s(57),N=s(79),M=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)(R.a,{children:[Object(r.jsxs)(C.a,{className:"dark center",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h6",{children:Object(r.jsx)("strong",{children:this.props.guild.name})})}),Object(r.jsx)(C.a.Body,{children:Object(r.jsx)(N.a,{width:75,height:75,alt:"Icon of ".concat(this.props.guild.name),src:this.props.guild.icon?"https://cdn.discordapp.com/icons/".concat(this.props.guild.id,"/").concat(this.props.guild.icon,".png"):"https://cdn.discordapp.com/embed/avatars/0.png"})}),Object(r.jsx)(C.a.Footer,{children:Object(r.jsx)(T.a,{variant:"light",as:j.b,to:"/".concat(this.props.guild.id,"/manage"),block:!0,children:"Manage"})})]}),Object(r.jsx)("br",{})]})})}}]),s}(n.Component),L=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)("div",{className:"center",children:[Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:"Page Requires Login"})}),Object(r.jsx)("p",{children:"This page requires you to be logged in with Discord."}),Object(r.jsx)("hr",{}),Object(r.jsx)(T.a,{onClick:function(){return window.location.replace("".concat("https://api.backupcord.de","/oauth/login"))},variant:"success",children:"Login with Discord"})]})})}}]),s}(n.Component),F=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={error:null,success:null,disabled:!1,oldId:null},r.migrate=r.migrate.bind(Object(P.a)(r)),r}return Object(d.a)(s,[{key:"migrate",value:function(){var e=this;this.setState({disabled:!0}),O()("".concat("https://api.backupcord.de","/restore/").concat(this.state.oldId,"/migrate"),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null,disabled:!1}):e.setState({success:t.response,error:null})})).catch((function(){e.setState({success:null,disabled:!1,error:"An unknown server error occured when sending migration request"})}))}},{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){return this.props.user?Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"User Migration Request"})})}),Object(r.jsxs)(C.a.Body,{children:[this.state.error&&Object(r.jsx)(S.a,{variant:"danger",children:Object(r.jsx)("strong",{children:this.state.error})}),this.state.success&&Object(r.jsx)(S.a,{variant:"success",children:Object(r.jsx)("strong",{children:this.state.success})}),Object(r.jsx)("p",{children:"You can submit a user migration request (this is useful if you have moved to a new account on Discord and want to transfer your existing linked users)."}),Object(r.jsx)(A.a.Control,{id:"oldId",value:this.state.oldId||"",placeholder:"Enter your old user ID here",onChange:this.handleInput.bind(this)})]}),Object(r.jsx)(C.a.Footer,{children:Object(r.jsx)(T.a,{disabled:this.state.disabled,variant:"light",onClick:this.migrate,block:!0,children:"Send Migration Request"})})]}),Object(r.jsx)("hr",{}),Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:"Server Selection"})}),Object(r.jsx)("br",{}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Servers You Own"})}),!this.props.user.guilds.filter((function(e){return e.owner})).length&&Object(r.jsx)(S.a,{variant:"info",children:"You do not own any servers"}),Object(r.jsx)(D.a,{lg:4,md:3,sm:2,xs:1,children:this.props.user.guilds.filter((function(e){return e.owner})).length?this.props.user.guilds.filter((function(e){return e.owner})).map((function(e){return Object(r.jsx)(M,{guild:e},e.id)})):""}),Object(r.jsx)("hr",{}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Servers You Are Administrator In"})}),!this.props.user.guilds.filter((function(e){return!e.owner})).length&&Object(r.jsx)(S.a,{variant:"info",children:"You are not administrator in any servers"}),Object(r.jsx)(D.a,{lg:4,md:3,sm:2,xs:1,children:this.props.user.guilds.filter((function(e){return!e.owner})).length?this.props.user.guilds.filter((function(e){return!e.owner})).map((function(e){return Object(r.jsx)(M,{guild:e},e.id)})):""})]}):Object(r.jsx)(L,{})}}]),s}(n.Component),B=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={loading:!0,guild:null,error:null,success:null,prefix:null,verifiedRole:null,logsChannel:null,welcomeMessage:null,warning:null,pullDisabled:!1,restoreDisabled:!1,allowAdmin:!0,visibleUsers:10,pullSuccess:null,pullError:null},r.updateSettings=r.updateSettings.bind(Object(P.a)(r)),r.pullUser=r.pullUser.bind(Object(P.a)(r)),r}return Object(d.a)(s,[{key:"loadMore",value:function(){this.setState({visibleUsers:this.state.visibleUsers+10})}},{key:"loadData",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/").concat(this.props.match.params.id,"/load"),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({loading:!1,warning:t.response}):e.setState({loading:!1,guild:t.response,prefix:t.response.prefix,verifiedRole:t.response.verifiedRole,logsChannel:t.response.logsChannel,allowAdmin:t.response.allowAdmin,welcomeMessage:t.response.welcomeMessage})})).catch((function(){e.setState({loading:!0,guild:null})}))}},{key:"handleCheckbox",value:function(e){this.setState({allowAdmin:!this.state.allowAdmin})}},{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.id,e.target.value))}},{key:"handleSelect",value:function(e){this.setState(Object(w.a)({},e.target.id,e.target.options[e.target.selectedIndex].id))}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"pullUsers",value:function(){var e=this;this.setState({pullDisabled:!0}),O()("".concat("https://api.backupcord.de","/restore/").concat(this.state.guild.id,"/pull"),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({pullError:t.response,pullDisabled:!1,pullSuccess:null}):(e.loadData(),e.setState({pullSuccess:"Successfully pulled ".concat(t.response," members into the server"),pullError:null}))})).catch((function(){e.setState({pullSuccess:null,pullDisabled:!1,pullError:"An unknown server error occured when pulling members"})}))}},{key:"pullUser",value:function(e){var t=this;O()("".concat("https://api.backupcord.de","/restore/").concat(this.state.guild.id,"/pull/").concat(e),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e.error?t.setState({pullError:e.response,pullSuccess:null}):(t.loadData(),t.setState({pullSuccess:"User pulled successfully",pullError:null}))})).catch((function(){t.setState({success:null,error:"An unknown server error occured when pulling a member"})}))}},{key:"backupServer",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/").concat(this.state.guild.id,"/backup"),{method:"POST",credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):e.setState({success:"Server roles and channels backed up successfully",error:null})})).catch((function(){e.setState({success:null,error:"An unknown server error occured when performing a server backup"})}))}},{key:"restoreServer",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/").concat(this.state.guild.id,"/backup-restore"),{method:"POST",credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):e.setState({success:"Server roles and channels restored successfully",error:null,restoreDisabled:!0})})).catch((function(){e.setState({success:null,error:"An unknown server error occured when performing a server backup restore"})}))}},{key:"updateSettings",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/").concat(this.state.guild.id,"/manage"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prefix:this.state.prefix,verifiedRole:this.state.verifiedRole,logsChannel:this.state.logsChannel,allowAdmin:this.state.allowAdmin,welcomeMessage:this.state.welcomeMessage}),credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({success:null,error:t.response}):e.setState({success:"Updated server settings successfully!",error:null})})).catch((function(){e.setState({success:null,error:"An unknown server error occured when updating settings"})}))}},{key:"render",value:function(){var e=this;return this.props.user?this.state.loading?Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:"Loading..."})}):this.state.warning?Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(S.a,{variant:"warning",children:this.state.warning}),Object(r.jsx)("p",{children:Object(r.jsx)("strong",{children:"Invite the bot to your server today!"})}),Object(r.jsx)(T.a,{onClick:function(){return window.open("https://discord.com/oauth2/authorize?client_id=".concat("992074070453661726","&permissions=8&scope=bot&redirect_uri=").concat(encodeURIComponent("https://dashboard.backupcord.de"),"&response_type=code"))},variant:"success",block:!0,children:"Invite Me"})]}):Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsxs)(C.a,{className:"dark center",children:[Object(r.jsxs)(C.a.Header,{children:[Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:this.state.guild.name})}),Object(r.jsxs)("h5",{children:[Object(r.jsx)("strong",{children:"Member Count: "}),Object(r.jsx)("i",{children:this.state.guild.memberCount})]})]}),Object(r.jsx)(C.a.Body,{children:Object(r.jsx)(N.a,{src:this.state.guild.icon||"https://cdn.discordapp.com/embed/avatars/0.png",width:100,height:100,alt:"Icon of ".concat(this.state.guild.name),roundedCircle:!0})})]}),Object(r.jsx)("br",{}),Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Server Configuration"})})}),Object(r.jsxs)(C.a.Body,{children:[this.state.error&&Object(r.jsx)(S.a,{variant:"danger",children:this.state.error}),this.state.success&&Object(r.jsx)(S.a,{variant:"success",children:this.state.success}),this.state.guild.owner&&Object(r.jsx)(A.a.Check,{type:"checkbox",id:"allowAdmin",onChange:this.handleCheckbox.bind(this),label:"Allow members with ADMINISTRATOR permissions to manage this server",checked:this.state.allowAdmin,custom:!0}),Object(r.jsx)(A.a.Label,{children:"Prefix:"}),Object(r.jsx)(A.a.Control,{onChange:this.handleInput.bind(this),id:"prefix",value:this.state.prefix||""}),Object(r.jsx)(A.a.Label,{children:"Welcome Message:"}),Object(r.jsx)(A.a.Control,{onChange:this.handleInput.bind(this),id:"welcomeMessage",value:this.state.welcomeMessage||""}),Object(r.jsx)(A.a.Text,{className:"text-muted",children:"This is a premium user feature."}),Object(r.jsx)(A.a.Label,{children:"Verified Role:"}),Object(r.jsx)(A.a.Control,{onChange:this.handleSelect.bind(this),id:"verifiedRole",as:"select",children:this.state.guild.roles.map((function(t){return Object(r.jsxs)("option",{id:t.id,selected:t.id===e.state.verifiedRole,children:["@",t.name]},t.id)}))}),Object(r.jsx)(A.a.Label,{children:"Logs Channel:"}),Object(r.jsx)(A.a.Control,{onChange:this.handleSelect.bind(this),id:"logsChannel",as:"select",children:this.state.guild.channels.map((function(t){return Object(r.jsxs)("option",{id:t.id,selected:t.id===e.state.logsChannel,children:["#",t.name]},t.id)}))})]}),Object(r.jsxs)(C.a.Footer,{children:[Object(r.jsx)(T.a,{onClick:this.updateSettings,variant:"light",block:!0,children:"Update"}),Object(r.jsx)(T.a,{variant:"primary",onClick:this.backupServer.bind(this),block:!0,children:"Backup Server Channels & Roles"}),Object(r.jsx)(T.a,{variant:"primary",onClick:this.restoreServer.bind(this),disabled:this.state.restoreDisabled,block:!0,children:"Restore Latest Backup"}),Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"NOTE: "}),"Restoring a server backup will delete all your existing roles and channels; proceed with caution!"]})]})]}),Object(r.jsx)("br",{}),this.state.verifiedRole&&Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Member Pulling"})})}),Object(r.jsxs)(C.a.Body,{children:[this.state.pullError&&Object(r.jsx)(S.a,{variant:"danger",children:this.state.pullError}),this.state.pullSuccess&&Object(r.jsx)(S.a,{variant:"success",children:this.state.pullSuccess}),Object(r.jsx)(T.a,{variant:"warning",disabled:this.state.pullDisabled,onClick:this.pullUsers.bind(this),block:!0,children:"Pull All Users"}),Object(r.jsx)(A.a.Text,{className:"text-muted",children:"The restore process may take a while depending on how many authorized members you have..."}),Object(r.jsx)("hr",{}),Object(r.jsxs)(I.a,{className:"table-dark",variant:"dark",borderless:!0,hover:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"User ID"}),Object(r.jsx)("th",{children:"User Tag"}),Object(r.jsx)("th",{children:"Actions"})]})}),Object(r.jsx)("tbody",{children:this.state.guild.linkedUsers.slice(0,this.state.visibleUsers).map((function(t){return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:t.id}),Object(r.jsx)("td",{children:t.tag}),Object(r.jsx)("td",{children:Object(r.jsx)(T.a,{onClick:e.pullUser.bind(e,t.id),variant:"light",disabled:t.inServer,children:"Pull"})})]})})}))})]}),this.state.guild.linkedUsers.length>this.state.visibleUsers&&Object(r.jsx)(T.a,{variant:"light",onClick:this.loadMore.bind(this),block:!0,children:"Load More..."})]})]})}),Object(r.jsx)("br",{})]}):Object(r.jsx)(L,{})}}]),s}(n.Component),z=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={loading:!0,user:null,error:null,warning:null,success:null,disabled:!1,redirectUri:null},r.saveData=r.saveData.bind(Object(P.a)(r)),r}return Object(d.a)(s,[{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.id,e.target.value))}},{key:"unlink",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/restore/").concat(this.state.user.id,"/unlink"),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):e.setState({error:null,success:"Successfully opted out from server force join",disabled:!0})})).catch((function(){e.setState({error:"An unknown server error occured when unlinking"})}))}},{key:"register",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/restore/").concat(this.state.user.id,"/register"),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):(e.state.user.redirectUri&&setTimeout((function(){window.location.replace(e.state.user.redirectUri)}),3e3),e.setState({error:null,success:e.state.user.redirectUri?"Successfully opted in to server force join, redirecting...":"Successfully opted in to server force join",disabled:!0}))})).catch((function(){e.setState({error:"An unknown server error occured when registering"})}))}},{key:"saveData",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/restore/").concat(this.state.user.id,"/save-data"),{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({redirectUri:this.state.redirectUri})}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({error:t.response,success:null}):(e.state.user.redirectUri&&setTimeout((function(){window.location.replace(e.state.user.redirectUri)}),3e3),e.setState({error:null,success:"Successfully saved your data"}))})).catch((function(){e.setState({error:"An unknown server error occured when saving data"})}))}},{key:"componentDidMount",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/restore/").concat(this.props.match.params.id,"/load"),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return t.error?e.setState({warning:t.response,loading:!1}):e.setState({user:t.response,loading:!1})})).catch((function(){e.setState({warning:"An unknown server error occured when fetching a user",loading:!1})}))}},{key:"render",value:function(){return this.props.user?this.state.loading?Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:"Loading..."})}):this.state.warning?Object(r.jsx)(S.a,{variant:"warning",children:this.state.warning}):Object(r.jsxs)(c.a.Fragment,{children:[this.state.error&&Object(r.jsx)(S.a,{variant:"danger",children:this.state.error}),this.state.success&&Object(r.jsx)(S.a,{variant:"success",children:this.state.success}),this.state.user.id===this.props.user.id&&Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{className:"center",children:Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:"Configuration"})})}),Object(r.jsxs)(C.a.Body,{children:[Object(r.jsx)(A.a.Label,{children:"Redirect URL:"}),Object(r.jsx)(A.a.Control,{placeholder:"Enter a URL to redirect users to after verification",onChange:this.handleInput.bind(this),id:"redirectUri",value:this.state.redirectUri||""}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{onClick:this.saveData,variant:"light",block:!0,children:"Save Changes"})]})]}),Object(r.jsx)("br",{})]}),Object(r.jsxs)(C.a,{className:"dark center",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsxs)("h1",{children:[Object(r.jsx)("strong",{children:this.state.user.username}),"#",Object(r.jsx)("i",{children:this.state.user.discriminator})]})}),Object(r.jsxs)(C.a.Body,{children:[Object(r.jsx)(N.a,{src:this.state.user.avatar,width:100,height:100,alt:"Avatar of ".concat(this.state.user.username),roundedCircle:!0}),Object(r.jsx)("br",{}),!this.state.user.linked&&Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Notice:"})," By clicking the below button, you are agreeing that the above user can force you to join any server whenever they wish."]})]}),Object(r.jsxs)(C.a.Footer,{children:[!this.state.user.linked&&Object(r.jsx)(T.a,{variant:"light",onClick:this.register.bind(this),disabled:this.state.disabled,block:!0,children:"I agree to the above statement"}),this.state.user.linked&&Object(r.jsx)(T.a,{variant:"light",onClick:this.unlink.bind(this),disabled:this.state.disabled,block:!0,children:"Unlink my account"})]})]})]}):Object(r.jsx)(L,{})}}]),s}(n.Component),G=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(l.a)(this,s);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={key:null,error:null,success:!1},e}return Object(d.a)(s,[{key:"handleInput",value:function(e){this.setState(Object(w.a)({},e.target.id,e.target.value))}},{key:"activatePremium",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/admin/redeem-premium-key"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:this.state.key}),credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error)return e.setState({error:t.response});e.setState({error:null,success:!0}),setTimeout((function(){window.location.reload()}),3e3)})).catch((function(){e.setState({error:"A server error occured when trying to redeem a premium key"})}))}},{key:"render",value:function(){return Object(r.jsxs)(c.a.Fragment,{children:[this.state.error&&Object(r.jsx)(S.a,{variant:"danger",children:this.state.error}),this.state.success&&Object(r.jsx)(S.a,{variant:"success",children:"Premium license key was redeemed successfully! Refreshing..."}),Object(r.jsxs)(C.a,{className:"dark",children:[Object(r.jsx)(C.a.Header,{children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Premium Activation"})})}),Object(r.jsxs)(C.a.Body,{children:[Object(r.jsx)("p",{children:"To access this bots premium features, you require a premium activation key - please enter your premium key in the textbox below to activate your license."}),Object(r.jsx)(A.a.Control,{id:"key",value:this.state.key||"",onChange:this.handleInput.bind(this),type:"input",placeholder:"Premium key here"}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{variant:"light",onClick:this.activatePremium.bind(this),block:!0,children:"Activate Premium"}),Object(r.jsx)(T.a,{variant:"success",block:!0,"data-sellix-product":"5fcf835cbfcf7",type:"submit",alt:"Buy Now with Sellix.io",children:"Purchase Premium"})]})]}),Object(r.jsx)("br",{})]})}}]),s}(n.Component),H=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(r.jsxs)(c.a.Fragment,{children:[!this.props.user&&Object(r.jsx)(S.a,{variant:"info",children:"Login to purchase premium"}),this.props.user&&!this.props.user.premium&&Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(S.a,{variant:"info",children:"You are currently on a FREE subscription"}),Object(r.jsx)(G,{})]}),this.props.user&&this.props.user.premium&&Object(r.jsx)(S.a,{variant:"info",children:"You are currently on a PREMIUM subscription"}),Object(r.jsx)(T.a,{variant:"success",onClick:function(){return window.open("https://discord.gg/VYfW2dQcKf")},block:!0,children:"Join our Discord Support Server"}),Object(r.jsx)("h1",{children:Object(r.jsx)("strong",{children:"Information"})}),Object(r.jsx)("p",{children:"Restore Bot is a discord bot aimed at recovery of discord servers, we have member linking and server backups."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Member Linking"})}),Object(r.jsx)("p",{children:"Members of your server can sign into this dashboard with Discord OAuth2, visit a linking URL the bot provides and with a simple click of a button, the account is tied until the user chooses to deauthorize."}),Object(r.jsx)("h6",{children:Object(r.jsx)("strong",{children:"What's the benefits of this?"})}),Object(r.jsx)("p",{children:'You can use a button on the admin panel labelled "Pull Users" in a fresh new server and it will force all authorized users to join the new server! Great, eh? This is a specially made member recovery system.'}),Object(r.jsxs)("p",{children:["Alternatively, you can use the ",Object(r.jsx)("code",{children:"%join"})," command in your server to pull authorized users."]}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Server Backups"})}),Object(r.jsx)("p",{children:"You can create a backup in your server in case you ever lose any channels or roles. The backup system will backup roles with its permissions and channels."}),Object(r.jsx)("h6",{children:Object(r.jsx)("strong",{children:"What's the benefits of this?"})}),Object(r.jsx)("p",{children:"With the click of a button, you can reinstate the server channels and roles back to how it was when you last did a backup. This is a role and channel recovery system."}),Object(r.jsx)("p",{children:"Do note, messages and channel permissions are not backed up in this process. You will also lose all current / old channels when you restore a backup."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"FAQ"})}),Object(r.jsx)("p",{children:Object(r.jsx)("strong",{children:"As a server owner, where can I find my authorization URL to provide to my members?"})}),Object(r.jsxs)("p",{children:["If you have setup this bot correctly and newcomers have direct messages enabled, they will be sent the URL. However, in the event that this does not happen, your URL is simply this: ",Object(r.jsxs)("code",{children:["https://dashboard.backupcord.de","/:id/register"]})," - replace ",Object(r.jsx)("code",{children:":id"})," with your discord user ID."]}),Object(r.jsx)("p",{children:Object(r.jsx)("strong",{children:"As a server owner, I used the Pull Members function and not all members were pulled, why?"})}),Object(r.jsx)("p",{children:"In this event, this would imply the member is either already in the server or their access token is invalid meaning they have deauthorized access to the application. Either that or they may have unlinked their account from you. Check your logs."}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})}}]),s}(n.Component),E=s(82),K=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(l.a)(this,s);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={modalActive:!1},e}return Object(d.a)(s,[{key:"modalStatus",value:function(){this.setState({modalActive:!this.state.modalActive})}},{key:"render",value:function(){return Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsxs)(E.a,{size:"lg",show:this.state.modalActive,onHide:this.modalStatus.bind(this),children:[Object(r.jsx)(E.a.Header,{className:"modal-bg",children:Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Privacy Policy"})})}),Object(r.jsxs)(E.a.Body,{className:"modal-bg",children:[Object(r.jsx)("p",{children:'The terms "us", "we" and "our" represent Restore Bot Services (restorebot.services)'}),Object(r.jsx)("p",{children:'The terms "you", "your" and "you\'re" represent you as a visitor or member of our website.'}),Object(r.jsx)("p",{children:"This privacy policy can be updated at anytime with or without given notice, it is your responsibility to check this privacy policy for updates."}),Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"What data is being stored and collected about you?"})}),Object(r.jsx)("p",{children:"We store your discord user ID, discord access token, discord refresh token and an array of discord user ID's who have authorized themselves with you."}),Object(r.jsx)("p",{children:"When you authorize yourself with another user, your discord user ID will be stored in an array linked to the user you're authorizing with."}),Object(r.jsx)("p",{children:"We collect the name, icon and owner of any servers you're in."}),Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"Why do we collect and store this information?"})}),Object(r.jsx)("p",{children:"All the collected and stored information is all relevant to ensure the bot is functioning correctly along with this website."}),Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"Do we share your information with third-parties?"})}),Object(r.jsx)("p",{children:"No, we do not share your information with other third-parties."}),Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"Do you store any cookies in my browser?"})}),Object(r.jsx)("p",{children:"Yes, when you login with discord and authorize, an access_token and refresh_token cookie will be created to improve your experience."}),Object(r.jsx)("p",{children:"CloudFlare may store additional cookies."}),Object(r.jsx)("h5",{children:Object(r.jsx)("strong",{children:"How do I request my data to be deleted?"})}),Object(r.jsx)("p",{children:"You will need to join our discord server and contact an administrator."})]}),Object(r.jsx)(E.a.Footer,{className:"modal-bg",children:Object(r.jsx)(T.a,{variant:"light",size:"sm",onClick:this.modalStatus.bind(this),children:"Close"})})]}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{variant:"light",size:"sm",onClick:this.modalStatus.bind(this),children:"Privacy Policy"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})}}]),s}(n.Component),q=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(l.a)(this,s);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={loading:!0,user:null},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;O()("".concat("https://api.backupcord.de","/oauth/user"),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){e.setState({loading:!1,user:t})})).catch((function(){e.setState({loading:!0})}))}},{key:"render",value:function(){var e=this;return this.state.loading?Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(x.a,{children:Object(r.jsx)("h1",{children:"Loading..."})})}):Object(r.jsxs)(j.a,{children:[Object(r.jsx)(k,{user:this.state.user}),Object(r.jsx)(b.c,{children:Object(r.jsxs)(x.a,{children:[Object(r.jsx)("br",{}),Object(r.jsx)(b.a,{exact:!0,path:"/",render:function(t){return Object(r.jsx)(H,Object(o.a)(Object(o.a)({},t),{},{user:e.state.user}))}}),Object(r.jsx)(b.a,{exact:!0,path:"/admin",render:function(t){return Object(r.jsx)(U,Object(o.a)(Object(o.a)({},t),{},{user:e.state.user}))}}),Object(r.jsx)(b.a,{exact:!0,path:"/servers",render:function(t){return Object(r.jsx)(F,Object(o.a)(Object(o.a)({},t),{},{user:e.state.user}))}}),Object(r.jsx)(b.a,{exact:!0,path:"/:id/manage",render:function(t){return Object(r.jsx)(B,Object(o.a)(Object(o.a)({},t),{},{user:e.state.user}))}}),Object(r.jsx)(b.a,{exact:!0,path:"/:id/register",render:function(t){return Object(r.jsx)(z,Object(o.a)(Object(o.a)({},t),{},{user:e.state.user}))}}),Object(r.jsx)(K,{})]})})]})}}]),s}(n.Component),Y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,87)).then((function(t){var s=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;s(e),r(e),n(e),c(e),i(e)}))};a.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(q,{})}),document.getElementById("root")),Y()}},[[74,1,2]]]);
//# sourceMappingURL=main.4622819d.chunk.js.map